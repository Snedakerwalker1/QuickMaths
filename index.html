<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>QuickMaths | Home</title>

<!---<link rel="stylesheet" href="css/style.css">-->
<link rel = "stylesheet"
   type = "text/css"
   href = "src/CSS/Home_Page_Style.css" />
</head>
<body>

<STYLE>A {text-decoration: none;
          width: 40%;

  } </STYLE>

<button class="tablink" onclick="openPage('QuickMaths', this, '#EBF5FB')" id="defaultOpen">QuickMaths Home</button>
<button class="tablink" onclick="openPage('Practice', this, '#EAFAF1')" >Practice</button>
<button class="tablink" onclick="openPage('Sign', this, '#FDEDEC')">Sign Up</button>
<button class="tablink" onclick="openPage('Log', this, '#FBEEE6')">Log In</button>

<div id="QuickMaths" class="tabcontent">
  <h3>Info</h3>
  <p>Welcome to QuickMaths the home of online mathematics Practice and Testing.
  <br> QuickMaths is a digital classroom tool designed for both teachers and students to help the students master their multiplication and division facts, while giving teachers a powerfull timed testing method, and giving both teachers and students in depth student results. 
  </p>
  <p>
  QuickMaths all began in the fall of 2020 when the California Elementary School Teacher Mrs. Quick wanted a way to continue giving her 70 question timed Multiplication and Division facts test to her 5th grade students, but couldnâ€™t find a suitable online method to give out said test. And so, with her input, Quickmaths was created to fill this need for an online, timed test service as well as a practice service for students. 
  </p>
  <!--
  <p>
  QuickMaths provides all of its current features free of charge as a hope to give students acces to 
  </p>
  -->
  <p>
  As of now, QuickMaths has 3 different built in multiplication and division testing options: the Multiplication 0-9s Test, Division 1-9s test, and the combined Multiplication and Division 0-9s test.
  </p>
  <p>
  Give any of these built in tests a whirl right now by clicking here. 
  </p>
  <div class="wrapper">
    <button class="button button1" onclick="openPage('Practice', this, '#EAFAF1')" >Try Tests</button>
  </div>

  <!-- Here I will put another set of tabs, at the bottom, that go to "About Us", "Privacy Policy" and "Contact Us" each will be their own new html page with the neccesary stuff.-->

</div>

<div id="Practice" class="tabcontent">
  <h3>Try Our Tests!</h3>
  <p>Feel free to try any, or even all of the test material below. Just click on the test of your choice, input the amount of time limit you want, and try one of our tests, and don't forget to have fun!
  </p>
  <p style="text-align:center;">
    Just chose a test and time limit below and it will take you to a Practice Test!
  </p>
  <div class="wrapper">
    <form name="testForm" id="testForm" onsubmit="event.preventDefault(); submit_time('testForm', 'tests','time1', 'time2', true);">
      <label for="tests">Choose a Test:</label>
        <select name="tests" id="tests">
          <option value="Multiplication_0_9.html">Multiplication 0-9 test</option>
          <option value="Division_0_9.html">Division 0-9 test</option>
        </select>
        <br><br>

      Time Limit: <input type="number" min="0" max="30" step="1" id="time1" name="min" value="3"> <input type="number" min="0" max="60" step="1" id="time2" name="sec" value="30">  <br><br> 

    </form> 
    <button class="button2 button12" onclick="submit_time('testForm','tests','time1', 'time2',  false)"> No Time Limit </button>
    <button class="button2 button12" onclick="submit_time('testForm', 'tests','time1', 'time2', true)"> Begin Test</button>
  </div>
  </div>
</div>

<div id="Sign" class="tabcontent">
  <h3>Sign Up</h3>
  <!-- Will need better butons, probably with a method to take them to the other sights -->
  <p>Students and Teachers can sign up here! 
    <br> This is an upcomming feature !!
  </p>
  <!--<button class="tablink" onclick="openPage('Sign', this, 'blue')">Sign Up</button>
  <button class="tablink" onclick="openPage('Log', this, 'orange')">Log In</button>
  -->
</div>

<div id="Log" class="tabcontent">
  <h3>Log In</h3>
  <p>Comming soon you will be able to log in and view your past test progree!!!</p>
</div>

<script>
var in_test = false
var timer_active = 0
var question_order = []
var number_correct = 0
var value = 0

function openPage(pageName,elmnt,color) {
  var result = true
  if (in_test == true) {
    result = confirm("Are you sure you want to exit test, your progress will be lost?")
    clearTimeout(timer_active);
    number_correct = 0
  }
  if (result == true) {
    in_test = false
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablink");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].style.display == "none") {
        tablinks[i].style.display = "block";
      }
      tablinks[i].style.backgroundColor = "";
    }
    document.getElementById(pageName).style.display = "block";
    elmnt.style.backgroundColor = color;
  }
}
function hideTab(element){
  document.getElementById(element).style.display = "none"
}
function testOpenPage(pageName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";  
  }
  tablinks = document.getElementsByClassName("tablink");
  for (i = 0; i < tablinks.length; i++) {
    if (tablinks[i].id != "defaultOpen") {
      tablinks[i].style.display = "none";
    }
  }
  testContent = document.getElementsByClassName("testContent");
  for (i=0;i < testContent.length; i++) {
    testContent[i].style.display = "none";
  }

  document.getElementById(pageName).style.display = "block";
}
function submit_time(formid, testName, inputid1, inputid2, hasTime) {
  //This function will get the timer info, and will open the test file selected with the specefide timer stuff. 
  var timemin, timesec
  var url = ""
  var array = window.location.href.split('/');
  array.pop();
  var first = array.shift();
  array.shift();
  if (first == "https:") { 
    array.shift();
  }
  while (array.length > 0) {
    url = url + '/' + array.shift();
  }
  url = url + '/';
  var name = document.getElementById(formid).elements[testName].value;
  url = url + name;
  if (hasTime == true) {
    timemin = document.getElementById(formid).elements[inputid1].value;
    timesec = document.getElementById(formid).elements[inputid2].value;
    url = url + '?' + hasTime + '/' + timemin + '/'+ timesec; 
    in_test = true;
    resetForms();
  }
  else {
    timemin = 0;
    timesec = 0;
    url = url + '?' + hasTime + '/' + timemin + '/'+ timesec; 
    in_test = true;
    resetForms();
  }
  window.location.assign(url);
}

function resetForms() {
  var allForms = document.forms;
  var i
  for (i = 0; i < allForms.length; i ++) {
    allForms[i].reset();
  }
}

function beginTest(testName) {
  //to bigin the test we need to initialize our answers, shuffle the questions, and show the first question. 
  document.getElementById('raw_score').innerHTML = "";
  document.getElementById('percent_score').innerHTML = "";
  number_correct = 0;
  var i, elementType, questions
  elementType = getNumTestAnswers(testName);
  questions = document.getElementsByClassName(elementType);
  question_order = new Array(questions.length);
  for (i= 0; i < questions.length; i++) {
    question_order[i] = questions[i];
    question_order[i].style.display = 'none';
  }
  shuffle(question_order);
  question_order[0].style.display = 'block';


}

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function advanceTest(testName, formid, questid, answered) {
  //If the bool is false then the skip was clicked, so this checks if the answer is corect 
  var answer, corect, temp
  temp = question_order[0];
  if (answered == true) {
    answer = document.getElementById(formid).elements[questid].value;
    corect = document.getElementById(formid).elements['answer'].value;
    if (answer == corect) {
        number_correct += 1;
    }
    question_order.shift();
  }
  else {
    temp = question_order.shift();
    question_order.push(temp);
  }
  temp.style.display = 'none';
  if (question_order.length == 0) {
    end_test(testName, false);
    return ;
  }
  question_order[0].style.display = 'block';
}

function end_test(testName, outOfTime) {
  if (outOfTime == true) {
    //So you ran out of time...
    question_order[0].style.display = 'none';
  }
  else {
    alert('Great Job! You finished the Test! Lets See how you did!');
  }

  var element_type = getNumTestAnswers(testName);
  var num_questions = document.getElementsByClassName(element_type);
  num_questions = num_questions.length;
  clearTimeout(timer_active);
  question_order = [];
  in_test = false;
  var percent
  if (number_correct != 0) {
    percent = Math.floor((number_correct/num_questions)*100);
  } else {
    percent = 0;
  }
  var msg1 = "Great Job you got a total of " + number_correct.toString() + " questions correct!";
  var msg2 = "That Comes out to a percent of " + percent.toString() + "&#37;";
  document.getElementById('raw_score').innerHTML = msg1;
  document.getElementById('percent_score').innerHTML = msg2;
  document.getElementById('timer').style.display = "none";

}
 
function getNumTestAnswers(testName) {
  if (testName == "testmult") {
    return 'multiplication';
  }
}

function startTimer(testName) {
  var presentTime = document.getElementById('timer').innerHTML;
  var timerArray = presentTime.split(/[:]+/);
  var m = timerArray[0];
  var s= checkSecond((timerArray[1] - 1));
  if(s==59){m=m-1}
    //will add a function that ends the test that is called when the timer runs out
  if(m<0){
    alert('Time Is Up, Lets See How You Did!');
    end_test(testName, true);
    return false;
  }

  document.getElementById('timer').innerHTML = m + ":" + s;
  console.log(m)
  timer_active = setTimeout(startTimer, 1000);
}

function checkSecond(sec) {
  if (sec < 10 && sec >= 0) {sec = "0" + sec}; // add zero in front of numbers < 10
  if (sec < 0) {sec = "59"};
  return sec;
}

// Get the element with id="defaultOpen" and click on it
document.getElementById("defaultOpen").click();
</script>
   
</body>
</html> 